import{w as S}from"./proxy-CXCGvyFN.js";import{a,n as e,L as N}from"./chunk-IR6S3I6Y-DPo2aVaG.js";import{u as w}from"./UserContext-B8aukPVB.js";import{P as C}from"./PageTransition-DY475_YN.js";import{a as y}from"./api-BXsSQKvn.js";import{c as v,d as E,e as _}from"./index-DctO9ZwJ.js";import{S as F}from"./LoadingSpinner-Dc1-0OQa.js";const j=({title:s,value:m,icon:r})=>e.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:s}),e.jsx("p",{className:"text-2xl font-semibold mt-1",children:m})]}),e.jsx("div",{className:"text-3xl text-gray-400",children:r})]})}),R=()=>{var i;const[s,m]=a.useState(null),[r,h]=a.useState(null),[o,x]=a.useState(!1),[l,c]=a.useState({}),[n,f]=a.useState(!0);a.useEffect(()=>{(async()=>{try{const[d,g]=await Promise.all([y.get("/organization/stats/"),y.get("/organization/profile/")]);m(d),h(g),c(g)}catch(d){console.error("Error fetching data:",d)}finally{f(!1)}})()},[]);const u=async t=>{t.preventDefault();try{const d=new FormData;Object.keys(l).forEach(p=>{l[p]!==r[p]&&d.append(p,l[p])});const g=await y.put("/organization/profile/",d,{headers:{"Content-Type":"multipart/form-data"}});h(g),x(!1)}catch(d){console.error("Error updating profile:",d)}};return n||!s||!r?e.jsx("div",{children:"Loading..."}):e.jsx(C,{children:e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"grid grid-cols-1 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Organization Profile"}),e.jsx("p",{className:"text-gray-500",children:"Manage your organization's information"})]}),e.jsx("button",{onClick:()=>x(!o),className:"px-4 py-2 text-sm font-medium rounded-full text-gray-900 border border-gray-200 hover:bg-gray-50",children:o?"Cancel":"Edit Profile"})]}),o?e.jsxs("form",{onSubmit:u,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Organization Name"}),e.jsx("input",{type:"text",value:l.name||"",onChange:t=>c({...l,name:t.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-gray-500 focus:ring-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),e.jsx("textarea",{value:l.description||"",onChange:t=>c({...l,description:t.target.value}),rows:4,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-gray-500 focus:ring-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Logo"}),e.jsx("input",{type:"file",onChange:t=>c({...l,logo:t.target.files[0]}),className:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-gray-50 file:text-gray-700 hover:file:bg-gray-100"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium rounded-full text-white bg-gray-900 hover:bg-gray-800",children:"Save Changes"})})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[r.logo&&e.jsx("img",{src:r.logo,alt:"Logo",className:"w-16 h-16 rounded-full object-cover"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-medium",children:r.name}),e.jsx("p",{className:"text-gray-500",children:r.email})]})]}),e.jsx("p",{className:"text-gray-600",children:r.description}),r.charity_number&&e.jsxs("p",{className:"text-sm text-gray-500",children:["Charity Number: ",r.charity_number]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(j,{title:"Total Opportunities",value:(s==null?void 0:s.total_opportunities)||0,icon:"📊"}),e.jsx(j,{title:"Active Opportunities",value:(s==null?void 0:s.active_opportunities)||0,icon:"✨"}),e.jsx(j,{title:"Total Applications",value:(s==null?void 0:s.total_applications)||0,icon:"📝"}),e.jsx(j,{title:"Pending Applications",value:(s==null?void 0:s.pending_applications)||0,icon:"⏳"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Recent Opportunities"}),e.jsx(N,{to:"/create-opportunity",className:"px-4 py-2 text-sm font-medium rounded-full text-white bg-gray-900 hover:bg-gray-800",children:"Create New"})]}),e.jsx("div",{className:"divide-y",children:(i=s==null?void 0:s.recent_opportunities)==null?void 0:i.map(t=>e.jsx("div",{className:"py-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:t.title}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:t.location_name})]}),e.jsx(N,{to:`/opportunity/${t.id}`,className:"text-sm text-gray-600 hover:text-gray-900",children:"View Details →"})]})},t.id))})]})]})})})})},b=({value:s,duration:m=2e3})=>{const[r,h]=a.useState(0),o=a.useRef(null),x=a.useRef(null);return a.useEffect(()=>{const l=c=>{x.current||(x.current=c);const n=c-x.current,f=Math.min(n/m,1),u=1-Math.pow(1-f,4),i=Math.floor(u*s);h(i),f<1&&(o.current=requestAnimationFrame(l))};return o.current=requestAnimationFrame(l),()=>{o.current&&cancelAnimationFrame(o.current)}},[s,m]),e.jsx(e.Fragment,{children:r})},D=()=>{const[s,m]=a.useState([]),[r,h]=a.useState(!0),[o,x]=a.useState([]),{user:l}=w();let c=0;a.useEffect(()=>{l&&(async()=>{try{h(!0),(await api.get("/volunteer/list/")).forEach(p=>{p.email===l.email&&(c=p.id)});const g=await api.get("/volunteer/"+c+"/");m(g),x(g.friends)}catch(t){console.error("Error fetching opportunities:",t)}finally{h(!1)}})()},[l]);const[n,f]=a.useState(!1),u=a.useRef(null);return a.useEffect(()=>{const i=new IntersectionObserver(([t])=>{t.isIntersecting&&(f(!0),i.disconnect())},{threshold:.1});return u.current&&i.observe(u.current),()=>i.disconnect()},[r]),e.jsx(C,{children:r?e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx(F,{})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl shadow-lg p-6 mb-8",children:e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"text-5xl bg-white/20 p-4 rounded-full",children:s.avatar||"👤"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-2xl font-semibold text-white",children:s.f_name+" "+s.l_name}),e.jsxs("div",{className:"mt-2 flex items-center gap-6 text-white/90",children:[e.jsxs("span",{className:"flex items-center gap-2 bg-white/10 px-4 py-2 rounded-full",children:[e.jsx(v,{className:"w-5 h-5"}),s.hours," hours volunteered"]}),e.jsxs("span",{className:"flex items-center gap-2 bg-white/10 px-4 py-2 rounded-full",children:[e.jsx(E,{className:"w-5 h-5"}),o.length," friends"]})]})]})]})}),e.jsxs("div",{ref:u,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:`bg-gradient-to-br from-blue-500 to-blue-600 p-6 rounded-xl shadow-lg transform transition-all duration-500 ${n?"translate-y-0 opacity-100":"translate-y-10 opacity-0"}`,children:[e.jsx("h3",{className:"text-lg font-medium text-white/90 mb-2",children:"Total Hours"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:n?e.jsx(b,{value:s.hours}):"0"}),e.jsx("p",{className:"text-sm text-white/80 mt-1",children:"Hours volunteered"})]}),e.jsxs("div",{className:`bg-gradient-to-br from-emerald-500 to-green-600 p-6 rounded-xl shadow-lg transform transition-all duration-500 delay-100 ${n?"translate-y-0 opacity-100":"translate-y-10 opacity-0"}`,children:[e.jsx("h3",{className:"text-lg font-medium text-white/90 mb-2",children:"Completions"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:n?e.jsx(b,{value:s.opportunities_completed}):"0"}),e.jsx("p",{className:"text-sm text-white/80 mt-1",children:"Opportunities Done"})]}),e.jsxs("div",{className:`bg-gradient-to-br from-violet-500 to-purple-600 p-6 rounded-xl shadow-lg transform transition-all duration-500 delay-200 ${n?"translate-y-0 opacity-100":"translate-y-10 opacity-0"}`,children:[e.jsx("h3",{className:"text-lg font-medium text-white/90 mb-2",children:"Impact"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:n?e.jsx(b,{value:s.overall_score}):"0"}),e.jsx("p",{className:"text-sm text-white/80 mt-1",children:"Points"})]}),e.jsxs("div",{className:`bg-gradient-to-br from-amber-500 to-yellow-600 p-6 rounded-xl shadow-lg transform transition-all duration-500 delay-300 ${n?"translate-y-0 opacity-100":"translate-y-10 opacity-0"}`,children:[e.jsx("h3",{className:"text-lg font-medium text-white/90 mb-2",children:"Rating"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:n?e.jsx(b,{value:4.9,duration:1500}):"0"}),e.jsx("p",{className:"text-sm text-white/80 mt-1",children:"Average rating"})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Friends"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:o.map(i=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-4 transition-all duration-300 hover:shadow-xl hover:scale-105",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"relative",children:e.jsx("span",{className:"text-3xl bg-gray-50 p-2 rounded-full",children:"👤"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:i.display_name}),e.jsx("p",{className:"text-sm text-gray-500",children:i.recentActivity})]})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-4 text-sm",children:[e.jsxs("span",{className:"flex items-center gap-1 bg-blue-50 text-blue-700 px-3 py-1 rounded-full",children:[e.jsx(v,{className:"w-4 h-4"}),i.overall_score," impact"]}),e.jsxs("span",{className:"flex items-center gap-1 bg-purple-50 text-purple-700 px-3 py-1 rounded-full",children:[e.jsx(_,{className:"w-4 h-4"}),i.badges," badges"]})]})]},i.id))})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Recent Activity"}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden border border-gray-100",children:e.jsxs("div",{className:"divide-y divide-gray-100",children:[e.jsx("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-2xl bg-green-50 p-2 rounded-full mr-3",children:"🌱"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"Community Garden Project"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Completed 3 hours • Yesterday"})]})]})}),e.jsx("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-2xl bg-blue-50 p-2 rounded-full mr-3",children:"📚"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"Youth Mentoring Program"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Completed 2 hours • 3 days ago"})]})]})}),e.jsx("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-2xl bg-yellow-50 p-2 rounded-full mr-3",children:"🏆"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:'Earned "Regular Helper" Badge'}),e.jsx("p",{className:"text-sm text-gray-500",children:"Achievement • 1 week ago"})]})]})})]})})]})]})})})},A=()=>{const{user:s}=w();return e.jsx("div",{className:"min-h-screen bg-gray-50",children:s.is_organization?e.jsx(R,{}):s.is_volunteer?e.jsx(D,{}):e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Account Type Not Found"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Please contact support if you believe this is an error."})]})})},$=S(A);export{$ as default};
