import{w as j}from"./with-props-BqwZr1IK.js";import{r as s,b as v,a as N,j as e}from"./chunk-IR6S3I6Y-C6Zvu3tq.js";const w=()=>{var u;const[n,x]=s.useState(""),[o,l]=s.useState(""),[c,a]=s.useState(""),[f,g]=s.useState(!1),[d,m]=s.useState(!1),r=v(),h=N();s.useEffect(()=>{var t;(t=r.state)!=null&&t.email&&l(r.state.email)},[r]);const p=async t=>{t.preventDefault(),a(""),m(!0);try{const i=await fetch("/api/auth/verify-organization/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o,otp_code:n})}),y=await i.json();if(!i.ok)throw new Error(y.error||"Verification failed");g(!0),setTimeout(()=>{h("/login")},3e3)}catch(i){a(i.message)}finally{m(!1)}},b=async()=>{a(""),a("Resend functionality is not implemented yet")};return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Verify Your Organization"}),e.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Enter the 6-digit code sent to your email"})]}),e.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:e.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[c&&e.jsx("div",{className:"mb-4 p-4 bg-red-100 text-red-700 rounded",children:c}),f?e.jsx("div",{className:"mb-4 p-4 bg-green-100 text-green-700 rounded",children:"Your organization has been successfully verified! Redirecting to login..."}):e.jsxs("form",{className:"space-y-6",onSubmit:p,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:o,onChange:t=>l(t.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",disabled:(u=r.state)==null?void 0:u.email})})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"otp",className:"block text-sm font-medium text-gray-700",children:"Verification Code"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{id:"otp",name:"otp",type:"text",inputMode:"numeric",pattern:"[0-9]{6}",maxLength:"6",required:!0,value:n,onChange:t=>x(t.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Enter 6-digit code"})})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:d,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:d?"Verifying...":"Verify Organization"})})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-300"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Didn't receive the code?"})})]}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{type:"button",onClick:b,className:"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Resend verification code"})})]})]})})]})},O=j(w);export{O as default};
