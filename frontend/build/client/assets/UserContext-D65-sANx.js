import{a as e,y as O,n as P}from"./chunk-IR6S3I6Y-BEDlfGdp.js";function B(o={}){const{nonce:t,onScriptLoadSuccess:n,onScriptLoadError:d}=o,[a,u]=e.useState(!1),c=e.useRef(n);c.current=n;const r=e.useRef(d);return r.current=d,e.useEffect(()=>{const l=document.createElement("script");return l.src="https://accounts.google.com/gsi/client",l.async=!0,l.defer=!0,l.nonce=t,l.onload=()=>{var i;u(!0),(i=c.current)===null||i===void 0||i.call(c)},l.onerror=()=>{var i;u(!1),(i=r.current)===null||i===void 0||i.call(r)},document.body.appendChild(l),()=>{document.body.removeChild(l)}},[t]),a}const R=e.createContext(null);function K({clientId:o,nonce:t,onScriptLoadSuccess:n,onScriptLoadError:d,children:a}){const u=B({nonce:t,onScriptLoadSuccess:n,onScriptLoadError:d}),c=e.useMemo(()=>({clientId:o,scriptLoadedSuccessfully:u}),[o,u]);return O.createElement(R.Provider,{value:c},a)}function H(){const o=e.useContext(R);if(!o)throw new Error("Google OAuth components must be used within GoogleOAuthProvider");return o}function V(o){var t;return(t=o==null?void 0:o.clientId)!==null&&t!==void 0?t:o==null?void 0:o.client_id}const q={large:40,medium:32,small:20};function Q({onSuccess:o,onError:t,useOneTap:n,promptMomentNotification:d,type:a="standard",theme:u="outline",size:c="large",text:r,shape:l,logo_alignment:i,width:C,locale:b,click_listener:J,containerProps:g,...M}){const G=e.useRef(null),{clientId:p,scriptLoadedSuccessfully:U}=H(),k=e.useRef(o);k.current=o;const w=e.useRef(t);w.current=t;const A=e.useRef(d);return A.current=d,e.useEffect(()=>{var m,S,_,x,h,y,E,I,L;if(U)return(_=(S=(m=window==null?void 0:window.google)===null||m===void 0?void 0:m.accounts)===null||S===void 0?void 0:S.id)===null||_===void 0||_.initialize({client_id:p,callback:s=>{var v;if(!(s!=null&&s.credential))return(v=w.current)===null||v===void 0?void 0:v.call(w);const{credential:f,select_by:N}=s;k.current({credential:f,clientId:V(s),select_by:N})},...M}),(y=(h=(x=window==null?void 0:window.google)===null||x===void 0?void 0:x.accounts)===null||h===void 0?void 0:h.id)===null||y===void 0||y.renderButton(G.current,{type:a,theme:u,size:c,text:r,shape:l,logo_alignment:i,width:C,locale:b,click_listener:J}),n&&((L=(I=(E=window==null?void 0:window.google)===null||E===void 0?void 0:E.accounts)===null||I===void 0?void 0:I.id)===null||L===void 0||L.prompt(A.current)),()=>{var s,v,f;n&&((f=(v=(s=window==null?void 0:window.google)===null||s===void 0?void 0:s.accounts)===null||v===void 0?void 0:v.id)===null||f===void 0||f.cancel())}},[p,U,n,a,u,c,r,l,i,C,b]),O.createElement("div",{...g,ref:G,style:{height:q[c],...g==null?void 0:g.style}})}const j=e.createContext(null),T=({children:o})=>{const[t,n]=e.useState(null),[d,a]=e.useState(!0);e.useEffect(()=>{const r=localStorage.getItem("user"),l=localStorage.getItem("access_token");r&&l&&n(JSON.parse(r)),a(!1)},[]);const u=r=>{n(r),localStorage.setItem("user",JSON.stringify(r))},c=()=>{n(null),localStorage.removeItem("user"),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token")};return P.jsx(j.Provider,{value:{user:t,login:u,logout:c,loading:d},children:o})},W=()=>e.useContext(j);export{K as G,T as U,Q as a,W as u};
