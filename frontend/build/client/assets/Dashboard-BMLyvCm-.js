import{w as me}from"./proxy-BvCMkRSn.js";import{a as m,n as a,L as H,t as he}from"./chunk-HA7DTUK3-Dw2W5fJk.js";import{u as Z}from"./UserContext-CLETiZQn.js";import{P as ee}from"./PageTransition-DzrlKaVj.js";import{a as O}from"./api-BXsSQKvn.js";import{c as I,d as fe,e as ge}from"./index-JAu6_eWD.js";import{S as xe}from"./LoadingSpinner-p_K9Qy2C.js";const C=({title:e,value:t,icon:n})=>a.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:e}),a.jsx("p",{className:"text-2xl font-semibold mt-1",children:t})]}),a.jsx("div",{className:"text-3xl text-gray-400",children:n})]})}),ye=()=>{var w;const[e,t]=m.useState(null),[n,r]=m.useState(null),[s,i]=m.useState(!1),[o,c]=m.useState({}),[u,f]=m.useState(!0);m.useEffect(()=>{(async()=>{try{const[b,h]=await Promise.all([O.get("/organization/stats/"),O.get("/organization/profile/")]);t(b),r(h),c(h)}catch(b){console.error("Error fetching data:",b)}finally{f(!1)}})()},[]);const g=async d=>{d.preventDefault();try{const b=new FormData;Object.keys(o).forEach(x=>{o[x]!==n[x]&&b.append(x,o[x])});const h=await O.put("/organization/profile/",b,{headers:{"Content-Type":"multipart/form-data"}});r(h),i(!1)}catch(b){console.error("Error updating profile:",b)}};return u||!e||!n?a.jsx("div",{children:"Loading..."}):a.jsx(ee,{children:a.jsx("div",{className:"min-h-screen bg-gray-50",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:a.jsxs("div",{className:"grid grid-cols-1 gap-8",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsxs("div",{className:"flex justify-between items-start mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-semibold",children:"Organization Profile"}),a.jsx("p",{className:"text-gray-500",children:"Manage your organization's information"})]}),a.jsx("button",{onClick:()=>i(!s),className:"px-4 py-2 text-sm font-medium rounded-full text-gray-900 border border-gray-200 hover:bg-gray-50",children:s?"Cancel":"Edit Profile"})]}),s?a.jsxs("form",{onSubmit:g,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Organization Name"}),a.jsx("input",{type:"text",value:o.name||"",onChange:d=>c({...o,name:d.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-gray-500 focus:ring-gray-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),a.jsx("textarea",{value:o.description||"",onChange:d=>c({...o,description:d.target.value}),rows:4,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-gray-500 focus:ring-gray-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Logo"}),a.jsx("input",{type:"file",onChange:d=>c({...o,logo:d.target.files[0]}),className:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-gray-50 file:text-gray-700 hover:file:bg-gray-100"})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium rounded-full text-white bg-gray-900 hover:bg-gray-800",children:"Save Changes"})})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[n.logo&&a.jsx("img",{src:n.logo,alt:"Logo",className:"w-16 h-16 rounded-full object-cover"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-medium",children:n.name}),a.jsx("p",{className:"text-gray-500",children:n.email})]})]}),a.jsx("p",{className:"text-gray-600",children:n.description}),n.charity_number&&a.jsxs("p",{className:"text-sm text-gray-500",children:["Charity Number: ",n.charity_number]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(C,{title:"Total Opportunities",value:(e==null?void 0:e.total_opportunities)||0,icon:"ðŸ“Š"}),a.jsx(C,{title:"Active Opportunities",value:(e==null?void 0:e.active_opportunities)||0,icon:"âœ¨"}),a.jsx(C,{title:"Total Applications",value:(e==null?void 0:e.total_applications)||0,icon:"ðŸ“"}),a.jsx(C,{title:"Pending Applications",value:(e==null?void 0:e.pending_applications)+(e==null?void 0:e.request_applications)||0,icon:"â³"})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"Recent Opportunities"}),a.jsx(H,{to:"/create-opportunity",className:"px-4 py-2 text-sm font-medium rounded-full text-white bg-gray-900 hover:bg-gray-800",children:"Create New"})]}),a.jsx("div",{className:"divide-y",children:(w=e==null?void 0:e.recent_opportunities)==null?void 0:w.map(d=>a.jsx("div",{className:"py-4",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium",children:d.title}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:d.location_name}),a.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[d.pending_applications+d.request_applications," Pending/Requested Applications"]})]}),a.jsx(H,{to:`/opportunity/${d.id}/pending/`,className:"text-sm text-gray-600 hover:text-gray-900",children:"View Details â†’"})]})},d.id))})]})]})})})})},te=6048e5,be=864e5,V=Symbol.for("constructDateFrom");function M(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&V in e?e[V](t):e instanceof Date?new e.constructor(t):new Date(t)}function p(e,t){return M(t||e,e)}let we={};function F(){return we}function E(e,t){var c,u,f,g;const n=F(),r=(t==null?void 0:t.weekStartsOn)??((u=(c=t==null?void 0:t.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??n.weekStartsOn??((g=(f=n.locale)==null?void 0:f.options)==null?void 0:g.weekStartsOn)??0,s=p(e,t==null?void 0:t.in),i=s.getDay(),o=(i<r?7:0)+i-r;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function Y(e,t){return E(e,{...t,weekStartsOn:1})}function ne(e,t){const n=p(e,t==null?void 0:t.in),r=n.getFullYear(),s=M(n,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const i=Y(s),o=M(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const c=Y(o);return n.getTime()>=i.getTime()?r+1:n.getTime()>=c.getTime()?r:r-1}function B(e){const t=p(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function pe(e,...t){const n=M.bind(null,t.find(r=>typeof r=="object"));return t.map(n)}function G(e,t){const n=p(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function ve(e,t,n){const[r,s]=pe(n==null?void 0:n.in,e,t),i=G(r),o=G(s),c=+i-B(i),u=+o-B(o);return Math.round((c-u)/be)}function je(e,t){const n=ne(e,t),r=M(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Y(r)}function Ne(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Me(e){return!(!Ne(e)&&typeof e!="number"||isNaN(+p(e)))}function Pe(e,t){const n=p(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const Se={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Oe=(e,t,n)=>{let r;const s=Se[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function R(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const ke={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},De={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},We={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Ee={date:R({formats:ke,defaultWidth:"full"}),time:R({formats:De,defaultWidth:"full"}),dateTime:R({formats:We,defaultWidth:"full"})},Ce={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Te=(e,t,n,r)=>Ce[e];function D(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,c=n!=null&&n.width?String(n.width):o;s=e.formattingValues[c]||e.formattingValues[o]}else{const o=e.defaultWidth,c=n!=null&&n.width?String(n.width):e.defaultWidth;s=e.values[c]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return s[i]}}const Ye={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Fe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},_e={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},qe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Ae={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Le={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Re=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},He={ordinalNumber:Re,era:D({values:Ye,defaultWidth:"wide"}),quarter:D({values:Fe,defaultWidth:"wide",argumentCallback:e=>e-1}),month:D({values:_e,defaultWidth:"wide"}),day:D({values:qe,defaultWidth:"wide"}),dayPeriod:D({values:Ae,defaultWidth:"wide",formattingValues:Le,defaultFormattingWidth:"wide"})};function W(e){return(t,n={})=>{const r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(s);if(!i)return null;const o=i[0],c=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],u=Array.isArray(c)?Xe(c,w=>w.test(o)):Qe(c,w=>w.test(o));let f;f=e.valueCallback?e.valueCallback(u):u,f=n.valueCallback?n.valueCallback(f):f;const g=t.slice(o.length);return{value:f,rest:g}}}function Qe(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function Xe(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function Ie(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const s=r[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const c=t.slice(s.length);return{value:o,rest:c}}}const Ve=/^(\d+)(th|st|nd|rd)?/i,Be=/\d+/i,Ge={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},$e={any:[/^b/i,/^(a|c)/i]},ze={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Je={any:[/1/i,/2/i,/3/i,/4/i]},Ue={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Ke={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Ze={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},et={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},tt={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},nt={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},rt={ordinalNumber:Ie({matchPattern:Ve,parsePattern:Be,valueCallback:e=>parseInt(e,10)}),era:W({matchPatterns:Ge,defaultMatchWidth:"wide",parsePatterns:$e,defaultParseWidth:"any"}),quarter:W({matchPatterns:ze,defaultMatchWidth:"wide",parsePatterns:Je,defaultParseWidth:"any",valueCallback:e=>e+1}),month:W({matchPatterns:Ue,defaultMatchWidth:"wide",parsePatterns:Ke,defaultParseWidth:"any"}),day:W({matchPatterns:Ze,defaultMatchWidth:"wide",parsePatterns:et,defaultParseWidth:"any"}),dayPeriod:W({matchPatterns:tt,defaultMatchWidth:"any",parsePatterns:nt,defaultParseWidth:"any"})},at={code:"en-US",formatDistance:Oe,formatLong:Ee,formatRelative:Te,localize:He,match:rt,options:{weekStartsOn:0,firstWeekContainsDate:1}};function st(e,t){const n=p(e,t==null?void 0:t.in);return ve(n,Pe(n))+1}function it(e,t){const n=p(e,t==null?void 0:t.in),r=+Y(n)-+je(n);return Math.round(r/te)+1}function re(e,t){var g,w,d,b;const n=p(e,t==null?void 0:t.in),r=n.getFullYear(),s=F(),i=(t==null?void 0:t.firstWeekContainsDate)??((w=(g=t==null?void 0:t.locale)==null?void 0:g.options)==null?void 0:w.firstWeekContainsDate)??s.firstWeekContainsDate??((b=(d=s.locale)==null?void 0:d.options)==null?void 0:b.firstWeekContainsDate)??1,o=M((t==null?void 0:t.in)||e,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const c=E(o,t),u=M((t==null?void 0:t.in)||e,0);u.setFullYear(r,0,i),u.setHours(0,0,0,0);const f=E(u,t);return+n>=+c?r+1:+n>=+f?r:r-1}function ot(e,t){var c,u,f,g;const n=F(),r=(t==null?void 0:t.firstWeekContainsDate)??((u=(c=t==null?void 0:t.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??n.firstWeekContainsDate??((g=(f=n.locale)==null?void 0:f.options)==null?void 0:g.firstWeekContainsDate)??1,s=re(e,t),i=M((t==null?void 0:t.in)||e,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),E(i,t)}function ct(e,t){const n=p(e,t==null?void 0:t.in),r=+E(n,t)-+ot(n,t);return Math.round(r/te)+1}function l(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const N={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return l(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):l(n+1,2)},d(e,t){return l(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return l(e.getHours()%12||12,t.length)},H(e,t){return l(e.getHours(),t.length)},m(e,t){return l(e.getMinutes(),t.length)},s(e,t){return l(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return l(s,t.length)}},k={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},$={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return N.y(e,t)},Y:function(e,t,n,r){const s=re(e,r),i=s>0?s:1-s;if(t==="YY"){const o=i%100;return l(o,2)}return t==="Yo"?n.ordinalNumber(i,{unit:"year"}):l(i,t.length)},R:function(e,t){const n=ne(e);return l(n,t.length)},u:function(e,t){const n=e.getFullYear();return l(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return l(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return l(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return N.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return l(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const s=ct(e,r);return t==="wo"?n.ordinalNumber(s,{unit:"week"}):l(s,t.length)},I:function(e,t,n){const r=it(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):l(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):N.d(e,t)},D:function(e,t,n){const r=st(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):l(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const s=e.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return l(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const s=e.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return l(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),s=r===0?7:r;switch(t){case"i":return String(s);case"ii":return l(s,t.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let s;switch(r===12?s=k.noon:r===0?s=k.midnight:s=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let s;switch(r>=17?s=k.evening:r>=12?s=k.afternoon:r>=4?s=k.morning:s=k.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return N.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):N.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):l(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):l(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):N.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):N.s(e,t)},S:function(e,t){return N.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return J(r);case"XXXX":case"XX":return S(r);case"XXXXX":case"XXX":default:return S(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return J(r);case"xxxx":case"xx":return S(r);case"xxxxx":case"xxx":default:return S(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+z(r,":");case"OOOO":default:return"GMT"+S(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+z(r,":");case"zzzz":default:return"GMT"+S(r,":")}},t:function(e,t,n){const r=Math.trunc(+e/1e3);return l(r,t.length)},T:function(e,t,n){return l(+e,t.length)}};function z(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=Math.trunc(r/60),i=r%60;return i===0?n+String(s):n+String(s)+t+l(i,2)}function J(e,t){return e%60===0?(e>0?"-":"+")+l(Math.abs(e)/60,2):S(e,t)}function S(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=l(Math.trunc(r/60),2),i=l(r%60,2);return n+s+t+i}const U=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},ae=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},lt=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return U(e,t);let i;switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",U(r,t)).replace("{{time}}",ae(s,t))},dt={p:ae,P:lt},ut=/^D+$/,mt=/^Y+$/,ht=["D","DD","YY","YYYY"];function ft(e){return ut.test(e)}function gt(e){return mt.test(e)}function xt(e,t,n){const r=yt(e,t,n);if(console.warn(r),ht.includes(e))throw new RangeError(r)}function yt(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const bt=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,wt=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,pt=/^'([^]*?)'?$/,vt=/''/g,jt=/[a-zA-Z]/;function se(e,t,n){var g,w,d,b;const r=F(),s=r.locale??at,i=r.firstWeekContainsDate??((w=(g=r.locale)==null?void 0:g.options)==null?void 0:w.firstWeekContainsDate)??1,o=r.weekStartsOn??((b=(d=r.locale)==null?void 0:d.options)==null?void 0:b.weekStartsOn)??0,c=p(e,n==null?void 0:n.in);if(!Me(c))throw new RangeError("Invalid time value");let u=t.match(wt).map(h=>{const x=h[0];if(x==="p"||x==="P"){const P=dt[x];return P(h,s.formatLong)}return h}).join("").match(bt).map(h=>{if(h==="''")return{isToken:!1,value:"'"};const x=h[0];if(x==="'")return{isToken:!1,value:Nt(h)};if($[x])return{isToken:!0,value:h};if(x.match(jt))throw new RangeError("Format string contains an unescaped latin alphabet character `"+x+"`");return{isToken:!1,value:h}});s.localize.preprocessor&&(u=s.localize.preprocessor(c,u));const f={firstWeekContainsDate:i,weekStartsOn:o,locale:s};return u.map(h=>{if(!h.isToken)return h.value;const x=h.value;(gt(x)||ft(x))&&xt(x,t,String(e));const P=$[x[0]];return P(c,x,s.localize,f)}).join("")}function Nt(e){const t=e.match(pt);return t?t[1].replace(vt,"'"):e}const Mt=({message:e})=>{const[t,n]=m.useState(!0);async function r(s){n(!1);try{await O.delete(`/message/${s}/remove`)}catch(i){console.error("Error deleting message:",i)}}return t?a.jsxs("div",{className:"p-6 bg-white rounded-xl shadow-lg relative",children:[a.jsxs("div",{className:"flex items-start space-x-4",children:[a.jsx("div",{className:"w-14 h-14 bg-yellow-300 text-white rounded-full flex items-center justify-center text-2xl font-semibold",children:a.jsx("span",{role:"img","aria-label":"star",children:"â­"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:e.from_person}),a.jsx("p",{className:"text-md text-gray-700",children:e.message})]})]}),a.jsx("p",{className:"absolute top-2 right-4 text-xs text-gray-400",children:se(new Date(e.time_sent),"EEEE, MMMM dd, yyyy")}),a.jsx("div",{className:"absolute top-1/2 right-2 transform -translate-y-1/2",children:a.jsx("button",{className:"text-gray-400 hover:bg-gray-300 rounded-full p-2 transition-all duration-200 text-2xl font-bold hover:text-gray-700",onClick:()=>r(e.id),children:"X"})})]},e.id):null},K=({app:e,completeButton:t,setUpdate:n,update:r})=>{async function s(i){try{await O.post(`/application/update/${e.id}/${i}/`)}catch(o){console.error("Error:",o)}n(!r)}return a.jsxs("div",{className:"p-5 bg-white rounded-xl shadow-md hover:shadow-lg transition-all duration-300 border border-gray-200 relative",children:[a.jsxs("p",{className:"absolute top-2 right-4 text-xs text-gray-500",children:["Applied: ",se(new Date(e.date_applied),"MMM dd, yyyy")]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"text-6xl w-24 h-24 bg-blue-400 text-white rounded-full flex items-center justify-center font-bold shadow-md",children:"ðŸ“‹"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e.opportunity.opportunity_name}),a.jsx("p",{className:"text-sm text-gray-600",children:e.opportunity.organisation_name})]}),a.jsx(H,{to:`/opportunity/${e.opportunity.id}`,className:"inline-flex items-center px-4 py-2 text-sm font-medium rounded-full text-white bg-gray-900 hover:bg-gray-800 transition-colors",children:"Learn More"})]}),t?a.jsxs("div",{className:"flex justfy-end items-center w-full",children:[a.jsx("span",{className:"text-sm text-gray-700 mr-4",children:"Think you have completeed this activity?"}),a.jsx("button",{className:"px-6 py-3 text-sm font-medium rounded-full text-white bg-gray-900 hover:bg-gray-800 transition-colors",onClick:()=>s("requesting_complete"),disabled:e.opportunity.has_applied,children:e.opportunity.status==="requesting_complete"?"Sent Requested":"Complete"})]}):""]})},T=({value:e,duration:t=2e3})=>{const[n,r]=m.useState(0),s=m.useRef(null),i=m.useRef(null);return m.useEffect(()=>{const o=c=>{i.current||(i.current=c);const u=c-i.current,f=Math.min(u/t,1),g=1-Math.pow(1-f,4),w=Math.floor(g*e);r(w),f<1&&(s.current=requestAnimationFrame(o))};return s.current=requestAnimationFrame(o),()=>{s.current&&cancelAnimationFrame(s.current)}},[e,t]),a.jsx(a.Fragment,{children:n})},Pt=()=>{const[e,t]=m.useState([]),[n,r]=m.useState(!0),[s,i]=m.useState([]),[o,c]=m.useState([]),[u,f]=m.useState([]),[g,w]=m.useState([]),{user:d}=Z(),{id:b}=he(),[h,x]=m.useState(!1),[P,ie]=m.useState(!1),[_,oe]=m.useState(!1),[q,Q]=m.useState(!1),ce=h?o:o.slice(0,3),le=P?u:u.slice(0,1),de=_?g:g.slice(0,1);let A=0;m.useEffect(()=>{d&&(async()=>{try{r(!0),b?A=b:(await O.get("/volunteer/list/")).forEach(X=>{X.email===d.email&&(A=X.id)});const v=await O.get("/volunteer/"+A+"/");t(v),i(v.friends),c(v.messages),f(v.pending_applications),w(v.accepted_applications)}catch(v){console.error("Error fetching opportunities:",v)}finally{r(!1)}})()},[d,h,q]);const[j,ue]=m.useState(!1),L=m.useRef(null);return m.useEffect(()=>{const y=new IntersectionObserver(([v])=>{v.isIntersecting&&(ue(!0),y.disconnect())},{threshold:.1});return L.current&&y.observe(L.current),()=>y.disconnect()},[n]),a.jsx(ee,{children:n?a.jsx("div",{className:"flex justify-center items-center h-screen",children:a.jsx(xe,{})}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-white",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl shadow-lg p-6 mb-8",children:a.jsxs("div",{className:"flex items-center gap-6",children:[d&&d.avatar_url?a.jsx("img",{src:d.avatar_url,alt:"Profile",className:"rounded-full w-24 h-24 border-4 border-white shadow-md"}):a.jsx("div",{className:"text-5xl bg-white/20 p-4 rounded-full",children:e.avatar||"ðŸ‘¤"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h1",{className:"text-2xl font-semibold text-white",children:e.f_name+" "+e.l_name}),a.jsxs("div",{className:"mt-2 flex items-center gap-6 text-white/90",children:[a.jsxs("span",{className:"flex items-center gap-2 bg-white/10 px-4 py-2 rounded-full",children:[a.jsx(I,{className:"w-5 h-5"}),e.hours," hours volunteered"]}),a.jsxs("span",{className:"flex items-center gap-2 bg-white/10 px-4 py-2 rounded-full",children:[a.jsx(fe,{className:"w-5 h-5"}),s.length," friends"]})]})]})]})}),a.jsxs("div",{ref:L,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[a.jsxs("div",{className:`bg-gradient-to-br from-blue-500 to-blue-600 p-6 rounded-xl shadow-lg transform transition-all duration-500 ${j?"translate-y-0 opacity-100":"translate-y-10 opacity-0"}`,children:[a.jsx("h3",{className:"text-lg font-medium text-white/90 mb-2",children:"Total Hours"}),a.jsx("p",{className:"text-3xl font-bold text-white",children:j?a.jsx(T,{value:e.hours}):"0"}),a.jsx("p",{className:"text-sm text-white/80 mt-1",children:"Hours volunteered"})]}),a.jsxs("div",{className:`bg-gradient-to-br from-emerald-500 to-green-600 p-6 rounded-xl shadow-lg transform transition-all duration-500 delay-100 ${j?"translate-y-0 opacity-100":"translate-y-10 opacity-0"}`,children:[a.jsx("h3",{className:"text-lg font-medium text-white/90 mb-2",children:"Completions"}),a.jsx("p",{className:"text-3xl font-bold text-white",children:j?a.jsx(T,{value:e.opportunities_completed}):"0"}),a.jsx("p",{className:"text-sm text-white/80 mt-1",children:"Opportunities Done"})]}),a.jsxs("div",{className:`bg-gradient-to-br from-violet-500 to-purple-600 p-6 rounded-xl shadow-lg transform transition-all duration-500 delay-200 ${j?"translate-y-0 opacity-100":"translate-y-10 opacity-0"}`,children:[a.jsx("h3",{className:"text-lg font-medium text-white/90 mb-2",children:"Impact"}),a.jsx("p",{className:"text-3xl font-bold text-white",children:j?a.jsx(T,{value:e.overall_score}):"0"}),a.jsx("p",{className:"text-sm text-white/80 mt-1",children:"Points"})]}),a.jsxs("div",{className:`bg-gradient-to-br from-amber-500 to-yellow-600 p-6 rounded-xl shadow-lg transform transition-all duration-500 delay-300 ${j?"translate-y-0 opacity-100":"translate-y-10 opacity-0"}`,children:[a.jsx("h3",{className:"text-lg font-medium text-white/90 mb-2",children:"Rating"}),a.jsx("p",{className:"text-3xl font-bold text-white",children:j?a.jsx(T,{value:4.9,duration:1500}):"0"}),a.jsx("p",{className:"text-sm text-white/80 mt-1",children:"Average rating"})]})]}),a.jsxs("div",{className:"mb-8",children:[a.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Friends"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:s.map(y=>a.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-4 transition-all duration-300 hover:shadow-xl hover:scale-105",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"relative",children:a.jsx("span",{className:"text-3xl bg-gray-50 p-2 rounded-full",children:"ðŸ‘¤"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:y.display_name}),a.jsx("p",{className:"text-sm text-gray-500",children:y.recentActivity})]})]}),a.jsxs("div",{className:"mt-3 flex items-center gap-4 text-sm",children:[a.jsxs("span",{className:"flex items-center gap-1 bg-blue-50 text-blue-700 px-3 py-1 rounded-full",children:[a.jsx(I,{className:"w-4 h-4"}),y.overall_score," Impact"]}),a.jsxs("span",{className:"flex items-center gap-1 bg-purple-50 text-purple-700 px-1 py-1 rounded-full",children:[a.jsx(ge,{className:"w-4 h-4"}),y.opportunities_completed," Completed Opportunities"]})]})]},y.id))})]}),a.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Opportunities applied for"}),u.length===0?a.jsx("div",{className:"col-span-2 text-center py-12",children:a.jsx("p",{className:"text-gray-500",children:"No pending applications"})}):a.jsx("div",{children:a.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden border border-gray-100",children:a.jsx("div",{className:"divide-y divide-gray-100",children:le.map(y=>a.jsx(K,{app:y,completeButton:!1,setUpdate:Q,update:q},y.id))})})}),u.length>1&&a.jsx("button",{onClick:()=>ie(!P),className:"w-full py-1 bg-gray-300 hover:bg-gray-400 text-white px-4 rounded-full transition-all relative",children:P?"Show Less":"Show More"}),a.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Opportunities in Progress"}),g.length===0?a.jsx("div",{className:"col-span-2 text-center py-12",children:a.jsx("p",{className:"text-gray-500",children:"No opportunities in progress"})}):a.jsx("div",{children:a.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden border border-gray-100",children:a.jsx("div",{className:"divide-y divide-gray-100",children:de.map(y=>a.jsx(K,{app:y,completeButton:!0,setUpdate:Q,update:q},y.id))})})}),g.length>1&&a.jsx("button",{onClick:()=>oe(!_),className:"w-full py-1 bg-gray-300 hover:bg-gray-400 text-white px-4 rounded-full transition-all relative",children:_?"Show Less":"Show More"}),a.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Messages"}),o.length===0?a.jsx("div",{className:"col-span-2 text-center py-12",children:a.jsx("p",{className:"text-gray-500",children:"No messages"})}):a.jsx("div",{children:a.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden border border-gray-100",children:a.jsx("div",{className:"divide-y divide-gray-100",children:ce.map(y=>a.jsx(Mt,{message:y},y.id))})})}),o.length>3&&a.jsx("button",{onClick:()=>x(!h),className:"w-full py-1 bg-gray-300 hover:bg-gray-400 text-white px-4 rounded-full transition-all relative",children:h?"Show Less":"Show More"})]})})})},St=()=>{const{user:e}=Z();return e?a.jsx("div",{className:"min-h-screen bg-gray-50",children:e.is_organization?a.jsx(ye,{}):e.is_volunteer?a.jsx(Pt,{}):a.jsxs("div",{className:"p-8 text-center",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Account Type Not Found"}),a.jsx("p",{className:"mt-2 text-gray-600",children:"Please contact support if you believe this is an error."})]})}):a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsx("p",{className:"text-gray-600",children:"Loading your dashboard..."})})},_t=me(St);export{_t as default};
