import{w as J}from"./with-props-BqwZr1IK.js";import{r,u as K,b as Z,j as e,L as F}from"./chunk-IR6S3I6Y-C6Zvu3tq.js";import{d as P,e as L,f as V,g as R}from"./index-DDJz-nCr.js";import{P as ee}from"./PageTransition-1p6Ne89E.js";import{u as se}from"./UserContext-BcfRxPbJ.js";import{S as te}from"./LoadingSpinner-CGbvDqwE.js";import{a as N}from"./api-BXsSQKvn.js";import{f as k}from"./format-CBpsKyOP.js";import"./proxy-7hmYPAw3.js";const re=({message:s})=>{const[i,l]=r.useState(!0);async function c(a){l(!1);try{await N.delete(`/message/${a}/remove`)}catch(o){console.error("Error deleting message:",o)}}return i?e.jsxs("div",{className:"p-6 bg-white rounded-xl shadow-lg relative",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"w-14 h-14 bg-yellow-300 text-white rounded-full flex items-center justify-center text-2xl font-semibold",children:e.jsx("span",{role:"img","aria-label":"star",children:"⭐"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:s.from_person}),e.jsx("p",{className:"text-md text-gray-700",children:s.message})]})]}),e.jsx("p",{className:"absolute top-2 right-4 text-xs text-gray-400",children:k(new Date(s.time_sent),"EEEE, MMMM dd, yyyy")}),e.jsx("div",{className:"absolute top-1/2 right-2 transform -translate-y-1/2",children:e.jsx("button",{className:"text-gray-400 hover:bg-gray-300 rounded-full p-2 transition-all duration-200 text-2xl font-bold hover:text-gray-700",onClick:()=>c(s.id),children:"X"})})]},s.id):null},D=({app:s,completeButton:i,setUpdate:l,update:c})=>{async function a(o){try{await N.post(`/application/update/${s.id}/${o}/`)}catch(n){console.error("Error:",n)}l(!c)}return e.jsxs("div",{className:"p-5 bg-white rounded-xl shadow-md hover:shadow-lg transition-all duration-300 border border-gray-200 relative",children:[e.jsxs("p",{className:"absolute top-2 right-4 text-xs text-gray-500",children:["Applied: ",k(new Date(s.date_applied),"MMM dd, yyyy")]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"text-6xl w-24 h-24 bg-blue-400 text-white rounded-full flex items-center justify-center font-bold shadow-md",children:"📋"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.opportunity.opportunity_name}),e.jsx("p",{className:"text-sm text-gray-600",children:s.opportunity.organisation_name})]}),e.jsx(F,{to:`/opportunity/${s.opportunity.id}`,className:"inline-flex items-center px-4 py-2 text-sm font-medium rounded-full text-white bg-gray-900 hover:bg-gray-800 transition-colors",children:"Learn More"})]}),i?e.jsxs("div",{className:"flex justfy-end items-center w-full",children:[e.jsx("span",{className:"text-sm text-gray-700 mr-4",children:"Think you have completeed this activity?"}),e.jsx("button",{className:"px-6 py-3 text-sm font-medium rounded-full text-white bg-gray-900 hover:bg-gray-800 transition-colors",onClick:()=>a("requesting_complete"),disabled:s.opportunity.has_applied,children:s.opportunity.status==="requesting_complete"?"Sent Requested":"Complete"})]}):""]})},A=({value:s,duration:i=2e3})=>{const[l,c]=r.useState(0),a=r.useRef(null),o=r.useRef(null);return r.useEffect(()=>{const n=f=>{o.current||(o.current=f);const u=f-o.current,y=Math.min(u/i,1),g=1-Math.pow(1-y,4),w=Math.floor(g*s);c(w),y<1&&(a.current=requestAnimationFrame(n))};return a.current=requestAnimationFrame(n),()=>{a.current&&cancelAnimationFrame(a.current)}},[s,i]),e.jsx(e.Fragment,{children:l})},m=({category:s,score:i,maxScore:l,icon:c,color:a})=>{const o=Math.min(7,Math.floor(i/(l/7))+1),n=i%(l/7)/(l/7)*100;return e.jsxs("div",{className:"transform transition-all duration-300 hover:scale-105 p-4 bg-white rounded-xl shadow-md hover:shadow-lg",children:[e.jsx("div",{className:`w-full h-24 ${a} text-white rounded-lg flex items-center justify-center mb-3`,children:e.jsx("span",{className:"text-4xl",children:c})}),e.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:s}),e.jsxs("p",{className:"text-xs text-gray-600 mb-2",children:["Level ",o," Badge"]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:e.jsx("div",{className:`h-2.5 rounded-full ${a.replace("bg-","bg-")}`,style:{width:`${n}%`}})})]})},ae=({volunteer:s})=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:s.is_user?"Your Badges":"Badges"}),e.jsx(F,{to:"/badges",state:{from:"dashboard"},className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"View All Badges"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[e.jsx(m,{category:"Elderly Care",score:s.scores.elderly||0,maxScore:500,icon:"👵",color:"bg-amber-500"}),e.jsx(m,{category:"Medical",score:s.scores.medical||0,maxScore:500,icon:"🩺",color:"bg-red-500"}),e.jsx(m,{category:"Disabilities",score:s.scores.disability||0,maxScore:500,icon:"♿",color:"bg-blue-500"}),e.jsx(m,{category:"Animal Welfare",score:s.scores.animals||0,maxScore:500,icon:"🐾",color:"bg-green-500"}),e.jsx(m,{category:"Sports",score:s.scores.animals||0,maxScore:500,icon:"🐾",color:"bg-blue-600"}),e.jsx(m,{category:"Greener Planet",score:s.scores.animals||0,maxScore:500,icon:"🐾",color:"bg-green-600"}),e.jsx(m,{category:"Education",score:s.scores.animals||0,maxScore:500,icon:"🐾",color:"bg-yellow-500"}),e.jsx(m,{category:"Community",score:s.scores.animals||0,maxScore:500,icon:"🐾",color:"bg-purple-500"})]})]}),le=()=>{var B;const[s,i]=r.useState([]),[l,c]=r.useState(!0),[a,o]=r.useState([]),[n,f]=r.useState([]),[u,y]=r.useState([]),[g,w]=r.useState([]),{user:p}=se(),{id:$}=K(),j=Z(),[v,O]=r.useState(!1),[S,q]=r.useState(!1),[_,U]=r.useState(!1),[M,I]=r.useState(!1),[b,h]=r.useState(((B=j.state)==null?void 0:B.activeTab)||"stats"),G=v?n:n.slice(0,3),H=S?u:u.slice(0,1),Q=_?g:g.slice(0,1);let E=0;r.useEffect(()=>{p&&(async()=>{try{c(!0),$?E=$:(await N.get("/volunteer/list/")).forEach(T=>{T.email===p.email&&(E=T.id)});const d=await N.get("/volunteer/"+E+"/");i(d),o(d.friends),f(d.messages),y(d.pending_applications),w(d.accepted_applications)}catch(d){console.error("Error fetching opportunities:",d)}finally{c(!1)}})()},[p,v,M]);const[x,W]=r.useState(!1),C=r.useRef(null);r.useEffect(()=>{const t=new IntersectionObserver(([d])=>{d.isIntersecting&&(W(!0),t.disconnect())},{threshold:.1});return C.current&&t.observe(C.current),()=>t.disconnect()},[l]),r.useEffect(()=>{var t;(t=j.state)!=null&&t.activeTab&&h(j.state.activeTab)},[j.state]);function X(){h("friends"),document.getElementById("active tab").scrollIntoView({behavior:"smooth"})}function Y(){h("badges"),document.getElementById("active tab").scrollIntoView({behavior:"smooth"})}function z(){h("stats"),document.getElementById("active tab").scrollIntoView({behavior:"smooth"})}return e.jsx(ee,{children:l?e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx(te,{})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl shadow-lg p-6 mb-8",children:e.jsxs("div",{className:"flex items-center gap-6",children:[p&&p.avatar_url?e.jsx("img",{src:p.avatar_url,alt:"Profile",className:"rounded-full w-24 h-24 border-4 border-white shadow-md"}):e.jsx("div",{className:"text-5xl bg-white/20 p-4 rounded-full",children:s.avatar||"👤"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-2xl font-semibold text-white",children:s.is_user||s.showName?s.f_name+" "+s.l_name:s.display_name}),e.jsxs("div",{className:"mt-2 flex items-center gap-6 text-white/90",children:[e.jsxs("span",{onClick:z,className:"flex items-center gap-2 bg-white/10 px-4 py-2 rounded-full hover:cursor-pointer hover:shadow-lg",children:[e.jsx(P,{className:"w-5 h-5"}),s.hours," hours volunteered"]}),e.jsxs("span",{onClick:X,className:"flex items-center gap-2 bg-white/10 px-4 py-2 rounded-full hover:cursor-pointer hover:shadow-lg",children:[e.jsx(L,{className:"w-5 h-5"}),a.length," friends"]}),e.jsxs("span",{onClick:Y,className:"flex items-center gap-2 bg-white/10 px-4 py-2 rounded-full hover:cursor-pointer hover:shadow-lg",children:[e.jsx(V,{className:"w-5 h-5"}),Object.keys(s.scores).length," badges"]}),s.is_user?e.jsx(F,{to:`/volunteer/${s.id}/settings`,className:"flex items-center gap-2 bg-white/10 px-4 py-2 ml-auto rounded-full hover:bg-gray-800 transition-colors",children:"Edit Profile"}):null]})]})]})}),e.jsxs("div",{ref:C,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:`bg-gradient-to-br from-blue-500 to-blue-600 p-6 rounded-xl shadow-lg transform transition-all duration-500 ${x?"translate-y-0 opacity-100":"translate-y-10 opacity-0"}`,children:[e.jsx("h3",{className:"text-lg font-medium text-white/90 mb-2",children:"Total Hours"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:x?e.jsx(A,{value:s.hours}):"0"}),e.jsx("p",{className:"text-sm text-white/80 mt-1",children:"Hours volunteered"})]}),e.jsxs("div",{className:`bg-gradient-to-br from-emerald-500 to-green-600 p-6 rounded-xl shadow-lg transform transition-all duration-500 delay-100 ${x?"translate-y-0 opacity-100":"translate-y-10 opacity-0"}`,children:[e.jsx("h3",{className:"text-lg font-medium text-white/90 mb-2",children:"Completions"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:x?e.jsx(A,{value:s.opportunities_completed}):"0"}),e.jsx("p",{className:"text-sm text-white/80 mt-1",children:"Opportunities Done"})]}),e.jsxs("div",{className:`bg-gradient-to-br from-violet-500 to-purple-600 p-6 rounded-xl shadow-lg transform transition-all duration-500 delay-200 ${x?"translate-y-0 opacity-100":"translate-y-10 opacity-0"}`,children:[e.jsx("h3",{className:"text-lg font-medium text-white/90 mb-2",children:"Impact"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:x?e.jsx(A,{value:s.overall_score}):"0"}),e.jsx("p",{className:"text-sm text-white/80 mt-1",children:"Points"})]}),e.jsxs("div",{className:`bg-gradient-to-br from-amber-500 to-yellow-600 p-6 rounded-xl shadow-lg transform transition-all duration-500 delay-300 ${x?"translate-y-0 opacity-100":"translate-y-10 opacity-0"}`,children:[e.jsx("h3",{className:"text-lg font-medium text-white/90 mb-2",children:"Last Completion"}),e.jsx("p",{className:"text-xl font-bold text-white",children:x?s.last_completion?k(new Date(s.last_completion),"EEEE, MMMM dd, yyyy"):"Not completed":"0"})]})]}),e.jsxs(e.Fragment,{children:[e.jsx("div",{id:"active tab",className:"mb-6 border-b border-gray-200",children:e.jsxs("ul",{className:"flex flex-wrap -mb-px text-sm font-medium text-center text-gray-500",children:[e.jsx("li",{className:"mr-2",children:s.is_user&&e.jsxs("button",{className:`inline-flex items-center justify-center p-4 rounded-t-lg border-b-2 ${b==="stats"?"text-blue-600 border-blue-600":"border-transparent hover:text-gray-600 hover:border-gray-300"}`,onClick:()=>h("stats"),children:[e.jsx(R,{className:"w-4 h-4 mr-2"}),"Activity"]})}),e.jsx("li",{className:"mr-2",children:s.showFriends&&e.jsxs("button",{className:`inline-flex items-center justify-center p-4 rounded-t-lg border-b-2 ${b==="friends"?"text-blue-600 border-blue-600":"border-transparent hover:text-gray-600 hover:border-gray-300"}`,onClick:()=>h("friends"),children:[e.jsx(L,{className:"w-4 h-4 mr-2"}),"Friends"]})}),e.jsx("li",{className:"mr-2",children:e.jsxs("button",{className:`inline-flex items-center justify-center p-4 rounded-t-lg border-b-2 ${b==="badges"?"text-blue-600 border-blue-600":"border-transparent hover:text-gray-600 hover:border-gray-300"}`,onClick:()=>h("badges"),children:[e.jsx(V,{className:"w-4 h-4 mr-2"}),"Badges"]})})]})}),b==="stats"&&s.is_user&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Opportunities applied for"}),u.length===0?e.jsx("div",{className:"col-span-2 text-center py-12",children:e.jsx("p",{className:"text-gray-500",children:"No pending applications"})}):e.jsx("div",{children:e.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden border border-gray-100",children:e.jsx("div",{className:"divide-y divide-gray-100",children:H.map(t=>e.jsx(D,{app:t,completeButton:!1,setUpdate:I,update:M},t.id))})})}),u.length>1&&e.jsx("button",{onClick:()=>q(!S),className:"w-full py-1 bg-gray-300 hover:bg-gray-400 text-white px-4 rounded-full transition-all relative",children:S?"Show Less":"Show More"}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Opportunities in Progress"}),g.length===0?e.jsx("div",{className:"col-span-2 text-center py-12",children:e.jsx("p",{className:"text-gray-500",children:"No opportunities in progress"})}):e.jsx("div",{children:e.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden border border-gray-100",children:e.jsx("div",{className:"divide-y divide-gray-100",children:Q.map(t=>e.jsx(D,{app:t,completeButton:!0,setUpdate:I,update:M},t.id))})})}),g.length>1&&e.jsx("button",{onClick:()=>U(!_),className:"w-full py-1 bg-gray-300 hover:bg-gray-400 text-white px-4 rounded-full transition-all relative",children:_?"Show Less":"Show More"}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Messages"}),n.length===0?e.jsx("div",{className:"col-span-2 text-center py-12",children:e.jsx("p",{className:"text-gray-500",children:"No messages"})}):e.jsx("div",{children:e.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden border border-gray-100",children:e.jsx("div",{className:"divide-y divide-gray-100",children:G.map(t=>e.jsx(re,{message:t},t.id))})})}),n.length>3&&e.jsx("button",{onClick:()=>O(!v),className:"w-full py-1 bg-gray-300 hover:bg-gray-400 text-white px-4 rounded-full transition-all relative",children:v?"Show Less":"Show More"})]}),b==="friends"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Friends"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:a.map(t=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-4 transition-all duration-300 hover:shadow-xl hover:scale-105",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"relative",children:e.jsx("span",{className:"text-3xl bg-gray-50 p-2 rounded-full",children:"👤"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:t.display_name}),e.jsx("p",{className:"text-sm text-gray-500",children:t.recentActivity})]})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-4 text-sm",children:[e.jsxs("span",{className:"flex items-center gap-1 bg-blue-50 text-blue-700 px-3 py-1 rounded-full",children:[e.jsx(P,{className:"w-4 h-4"}),t.overall_score," Impact"]}),e.jsxs("span",{className:"flex items-center gap-1 bg-purple-50 text-purple-700 px-1 py-1 rounded-full",children:[e.jsx(R,{className:"w-4 h-4"}),t.opportunities_completed," Completed Opportunities"]})]})]},t.id))})]})}),b==="badges"&&e.jsx(ae,{volunteer:s})]})]})})})},be=J(le);export{be as default};
