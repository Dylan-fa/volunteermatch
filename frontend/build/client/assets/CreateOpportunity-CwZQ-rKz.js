import{w as y}from"./with-props-BqwZr1IK.js";import{a as j,r as u,j as e}from"./chunk-IR6S3I6Y-C6Zvu3tq.js";import{A as v,M as w,a as N}from"./index.modern-DddIrP7d.js";import{a as k}from"./api-BXsSQKvn.js";import{P as C}from"./PageTransition-1p6Ne89E.js";import"./index-CUe7o6jQ.js";import"./proxy-7hmYPAw3.js";const _={lat:51.5074,lng:-.1278},q=()=>{const c=j(),[r,i]=u.useState({title:"",description:"",requirements:"",location_name:"",latitude:null,longitude:null,start_time:"",end_time:"",estimated_effort_ranking:"medium",estimated_duration:1,start_date:null,end_date:null,capacity:1}),[x,h]=u.useState(null),[b,m]=u.useState(""),s=a=>{const{name:o,value:n}=a.target;i(l=>({...l,[o]:n}))},g=a=>{const o=a.lat,n=a.lng;h({lat:o,lng:n}),i(t=>({...t,latitude:o,longitude:n}));const l=new window.google.maps.Geocoder,d={lat:o,lng:n};l.geocode({location:d}).then(t=>{t.results[0]&&i(p=>({...p,location_name:t.results[0].formatted_address}))}).catch(t=>{console.error("Geocoding failed:",t)})},f=async a=>{var o,n,l,d;a.preventDefault(),m("");try{const t=JSON.parse(localStorage.getItem("user"));console.log("Current user:",t),console.log("Form data:",r),(await k.post("/opportunities/create/",r)).status===201&&c("/dashboard")}catch(t){console.error("Error response:",(o=t.response)==null?void 0:o.data),((n=t.response)==null?void 0:n.status)===403?m("You must be logged in as an organization to create opportunities"):m(((d=(l=t.response)==null?void 0:l.data)==null?void 0:d.error)||"Failed to create opportunity")}};return e.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Create New Opportunity"}),b&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:b}),e.jsxs("form",{onSubmit:f,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Title"}),e.jsx("input",{type:"text",name:"title",value:r.title,onChange:s,required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),e.jsx("textarea",{name:"description",value:r.description,onChange:s,required:!0,rows:"4",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Requirements"}),e.jsx("textarea",{name:"requirements",value:r.requirements,onChange:s,required:!0,rows:"4",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Average Start Time (24 hour clock)"}),e.jsx("input",{type:"number",max:24,min:0,name:"start_time",value:r.start_time,onChange:s,required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Average End Time (24 hour clock)"}),e.jsx("input",{type:"number",max:24,min:0,name:"end_time",value:r.end_time,onChange:s,required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Estimated Duration (In Days)"}),e.jsx("input",{type:"number",min:0,name:"estimated_duration",value:r.estimated_duration,onChange:s,required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Start Date"}),e.jsx("input",{type:"date",name:"start_date",value:r.start_date,onChange:s,required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"End Date"}),e.jsx("input",{type:"date",name:"end_date",value:r.end_date,onChange:s,required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Capacity"}),e.jsx("input",{type:"number",min:0,name:"capacity",value:r.capacity,onChange:s,required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Estimated Effort"}),e.jsxs("select",{id:"effort",name:"estimated_effort_ranking",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Location"}),e.jsx("div",{className:"mt-2 h-[400px] w-full",children:e.jsx(v,{apiKey:"AIzaSyB0bbNwMEr4WRWFGAB-MqtkRGKK5dFXbJs",children:e.jsx(w,{defaultCenter:_,defaultZoom:13,reuseMaps:!0,onClick:a=>g(a.detail.latLng),mapId:"107f378fc363e5a7",children:x&&e.jsx(N,{position:x})})})}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Click on the map to set the location"})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:()=>c(-1),className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:"Create Opportunity"})]})]})]})},E=()=>e.jsx(C,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx(q,{})})})}),P=y(E);export{P as default};
